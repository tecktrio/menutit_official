{"ast":null,"code":"import axios from'axios';import React,{useEffect,useState}from'react';import{useNavigate,useRevalidator}from'react-router-dom';import{StoreBaseUrl}from'../constants';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ShopList(){const navigate=useNavigate();const token=localStorage.getItem('token');const gotoStore=async id=>{// localStorage.setItem('store_id',id)\nawait axios.get(StoreBaseUrl+'store/manage?store_id='+id).then(async res=>{console.log(res.data);await axios.get(StoreBaseUrl+'user/profile?user_id='+res.data.store_owner).then(user=>{console.log(user.data);navigate(\"store?shop_owner_email=\".concat(user.data.email,\"&store_name=\").concat(res.data.store_name,\"&division_name=main hall\"));});});};const[shopData,setShopData]=useState([]);const getStores=()=>{axios.get(StoreBaseUrl+'store/all',{'headers':\"Token \".concat(token)}).then(res=>{setShopData(res.data);}).catch(e=>{console.log(e);});};useEffect(()=>{getStores();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"\",children:shopData.map(shop=>{return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>gotoStore(shop.id),className:\"border border-gray-500 p-3 m-2 rounded-md cursor-pointer hover:border-blue-500  flex\",children:[/*#__PURE__*/_jsx(\"img\",{src:shop.store_image_url,className:\"w-28\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-2\",children:[/*#__PURE__*/_jsx(\"p\",{children:shop.store_name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-bold\",children:shop.store_license_number}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-700\",children:shop.store_desription}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Rating \",shop.store_rating]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Opens days        \",shop.store_open_dates]})]})]});})});}export default ShopList;","map":{"version":3,"names":["axios","React","useEffect","useState","useNavigate","useRevalidator","StoreBaseUrl","jsx","_jsx","jsxs","_jsxs","ShopList","navigate","token","localStorage","getItem","gotoStore","id","get","then","res","console","log","data","store_owner","user","concat","email","store_name","shopData","setShopData","getStores","catch","e","className","children","map","shop","onClick","src","store_image_url","store_license_number","store_desription","store_rating","store_open_dates"],"sources":["D:/menutit_official/client/src/components/ShopList.jsx"],"sourcesContent":["import axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useNavigate, useRevalidator } from 'react-router-dom'\r\nimport { StoreBaseUrl } from '../constants'\r\n\r\nfunction ShopList() {\r\n\r\n    const navigate = useNavigate()\r\n    const token = localStorage.getItem('token')\r\n\r\n    \r\n    const gotoStore=async(id)=>{\r\n        // localStorage.setItem('store_id',id)\r\n        await axios.get(StoreBaseUrl + 'store/manage?store_id='+id).then(async(res)=>{\r\n            console.log(res.data)\r\n            await axios.get(StoreBaseUrl + 'user/profile?user_id='+res.data.store_owner).then((user)=>{\r\n            console.log(user.data)\r\n\r\n                navigate(`store?shop_owner_email=${user.data.email}&store_name=${res.data.store_name}&division_name=main hall`)\r\n    \r\n            })\r\n        })\r\n    }\r\n\r\n    const [shopData, setShopData] = useState([])\r\n\r\n    const getStores = ()=>{\r\n        axios.get(StoreBaseUrl + 'store/all', {\r\n            'headers':`Token ${token}`\r\n        }).then((res)=>{\r\n            setShopData(res.data)\r\n        }).catch((e)=>{\r\n            console.log(e)\r\n        })\r\n    }\r\n\r\n    useEffect(()=>{\r\n        getStores()\r\n    },[])\r\n  return (\r\n    <div className=''>\r\n        {shopData.map(shop=>{\r\n            return (\r\n                <div  onClick={()=>gotoStore(shop.id)} className='border border-gray-500 p-3 m-2 rounded-md cursor-pointer hover:border-blue-500  flex'>\r\n               <img src={shop.store_image_url} className='w-28'/>\r\n               <div className='ml-2'>\r\n               <p>{shop.store_name}</p>\r\n\r\n                <div className='text-sm font-bold'>{shop.store_license_number}</div>\r\n                <p className='text-sm text-gray-700'>{shop.store_desription}</p>\r\n                <p>Rating {shop.store_rating}</p>\r\n                <p>Opens days        {shop.store_open_dates}</p>\r\n\r\n                </div> \r\n                </div>\r\n     \r\n            )\r\n        })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ShopList\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}